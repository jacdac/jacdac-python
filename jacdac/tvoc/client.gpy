from jacdac.bus import Bus, Client
from .constants import *
from typing import Union, cast


class TvocClient(Client):
    """
    Measures equivalent Total Volatile Organic Compound levels.
    """

    def __init__(self, bus: Bus, role: str) -> None:
        super().__init__(bus, JD_SERVICE_CLASS_TVOC, JD_TVOC_PACK_FORMATS, role)
    

    @property
    def TVOC(self) -> Union[float, None]:
        """
        Total volatile organic compound readings in parts per billion., ppb
        """
        reg = self.register(JD_TVOC_REG_TVOC)
        value = reg.value(0)
        return cast(Union[float, None], value)

    @property
    def TVOC_error(self) -> Union[float, None]:
        """
        (Optional) Error on the reading data, ppb
        """
        reg = self.register(JD_TVOC_REG_TVOC_ERROR)
        value = reg.value(0)
        return cast(Union[float, None], value)

    @property
    def min_TVOC(self) -> Union[float, None]:
        """
        (Optional) Minimum measurable value, ppb
        """
        reg = self.register(JD_TVOC_REG_MIN_TVOC)
        value = reg.value(0)
        return cast(Union[float, None], value)

    @property
    def max_TVOC(self) -> Union[float, None]:
        """
        (Optional) Minimum measurable value, ppb
        """
        reg = self.register(JD_TVOC_REG_MAX_TVOC)
        value = reg.value(0)
        return cast(Union[float, None], value)

    @property
    def conditioning_period(self) -> Union[int, None]:
        """
        (Optional) Time required to achieve good sensor stability before measuring after long idle period., s
        """
        reg = self.register(JD_TVOC_REG_CONDITIONING_PERIOD)
        value = reg.value(0)
        return cast(Union[int, None], value)

    
